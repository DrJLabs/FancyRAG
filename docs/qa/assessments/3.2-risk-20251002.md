# Risk Profile â€“ Story 3.2 (ingestion-qa-telemetry)

Date: 2025-10-02
Analyst: Quinn (QA)

## Summary
- Overall residual risk score: 20/100 (low).
- Critical risks: 0.
- High risks: 0.
- Medium risks: 0.
- Low risks: 5 (rollback coverage, metrics drift detection, runtime profiling, CI artifact contract, sanitization assurance).

## Risk Matrix

| Risk ID | Category | Description | Probability | Impact | Score | Priority |
| --- | --- | --- | --- | --- | --- | --- |
| TECH-001 | Technical | QA gate may execute after chunks persist, leaving partial Neo4j/Qdrant state when a failure triggers rollback only on downstream scripts. | Low (1) | Medium (2) | 2 | Low |
| DATA-001 | Data | Metric calculations could drift from true counts if metadata queries/fixtures diverge, masking ingestion regressions. | Low (1) | Medium (2) | 2 | Low |
| PERF-001 | Performance | Additional telemetry (histograms, diff checks) may increase run time and OpenAI usage on large corpora, exceeding documented budgets. | Low (1) | Medium (2) | 2 | Low |
| OPS-001 | Operational | CI workflows may depend on artefact naming/paths; missed uploads break gating visibility and block releases. | Low (1) | Medium (2) | 2 | Low |
| SEC-001 | Security | QA summaries could inadvertently include absolute paths or unsanitised file contents, leaking sensitive data in artefacts. | Low (1) | Low (1) | 1 | Low |

## Mitigation Strategies
- TECH-001: Pre-commit QA gating now enforced with rollback on failure; unit regression confirms rollback queries execute when thresholds trip.
- DATA-001: Metrics and traceability use shared metadata helpers; QA report versioning exposes drift and ensures parity.
- PERF-001: QA evaluation duration recorded (`qa_evaluation_ms` + log `qa.duration_ms`) so operators can benchmark large corpora and tune thresholds.
- OPS-001: Reports generated in deterministic directories with versioned schema; documentation directs CI to collect artifacts.
- SEC-001: Payload sanitized via shared scrubber with regression test verifying JSON/Markdown omit `/tmp/` absolute paths.

## Risk-Based Testing Focus
1. Maintain regression for QA rollback paths (`test_run_fails_on_qa_threshold`).
2. Keep deterministic fixture checks for metrics to detect drift.
3. Capture runtime baselines during larger-corpus smoke runs using the new duration metrics.
4. Retain sanitization regression; plan CI artifact upload assertion when integration harness runs in automation.

## Monitoring Recommendations
- Track QA duration metrics over time; alert when exceeding agreed thresholds.
- Surface QA failure frequencies and reasons in telemetry dashboards.
- Keep artifact sanitization and upload checks in CI once integration smoke resumes.

```yaml
risk_summary:
  totals:
    critical: 0
    high: 0
    medium: 0
    low: 5
  highest:
    id: TECH-001
    score: 2
    title: 'QA gate executes after writes, leaving partial datastore'
  recommendations:
    must_fix: []
    monitor:
      - 'Use qa_evaluation_ms to baseline ingestion runtime impact.'
      - 'Add CI artifact upload verification when integration pipeline is reinstated.'
```

Risk profile: docs/qa/assessments/3.2-risk-20251002.md
