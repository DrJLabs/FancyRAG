# Requirements Traceability – Story 3.3 (native-qdrant-retriever)

Date: 2025-10-02
Analyst: Quinn (QA)

## Coverage Summary
- Acceptance criteria: 5
- Fully covered: 4
- Partially covered: 1
- Not covered: 0

## AC → Test Mapping

### AC1 – Refactor ask_qdrant.py to use QdrantNeo4jRetriever
- `tests/unit/scripts/test_ask_qdrant.py::test_main_success_creates_artifact`
- `tests/unit/scripts/test_ask_qdrant.py::test_retriever_initialization_error`
- Manual smoke: `PYTHONPATH=src python scripts/ask_qdrant.py --question "What did Acme launch?" --top-k 3` (artifact review)

### AC2 – Preserve CLI surface, logging, and artifacts
- `tests/unit/scripts/test_ask_qdrant.py::test_main_success_creates_artifact`
- Artifact inspection: `artifacts/local_stack/ask_qdrant.json`

### AC3 – Retain SharedOpenAIClient usage and remediation handling
- `tests/unit/scripts/test_ask_qdrant.py::test_main_handles_openai_error`
- `tests/unit/scripts/test_ask_qdrant.py::test_main_success_creates_artifact`

### AC4 – Update unit tests to mock retriever abstraction
- `tests/unit/scripts/test_ask_qdrant.py::test_main_success_creates_artifact`
- `tests/unit/scripts/test_ask_qdrant.py::test_retriever_initialization_error`

### AC5 – Document retriever migration in architecture overview *(Partial)*
- Manual verification: docs/architecture/overview.md (Minimal Path Workflow section)

## Notes
- Integration smoke (`tests/integration/local_stack/test_minimal_path_smoke.py`) remains skipped without OpenAI credentials; once keys are available the suite should be rerun to confirm end-to-end retrieval.
- Documentation update validated manually; consider adding markdown lint or docs-link check in CI to protect AC5 going forward.

