# Risk Profile: Story 3.4 (Documentation Lint Automation)

Date: 2025-10-02
Reviewer: Quinn (Test Architect)

## Executive Summary

- Total risks identified: 4
- Critical risks: 0
- High risks: 1
- Overall risk score: 73/100
- Gate recommendation: CONCERNS (address high-risk mitigation before approval)

## Risk Matrix

| Risk ID     | Description                                                                 | Category | Probability | Impact | Score | Priority |
|-------------|------------------------------------------------------------------------------|----------|-------------|--------|-------|----------|
| TECH-001    | Lint guard misses retriever/minimal-path drift because checks are too naive | Technical| Medium (2) | High (3) | 6 | High |
| OPS-001     | CI job fails or flakes due to unmanaged dependencies for the lint command   | Operational | Medium (2) | Medium (2) | 4 | Medium |
| OPS-002     | High false-positive rate blocks merges and encourages disabling the guard   | Operational | Medium (2) | Medium (2) | 4 | Medium |
| TECH-002    | Architecture shard restructure causes lint runtime failures                 | Technical| Low (1) | Medium (2) | 2 | Low |

## Critical / High Risks

### TECH-001 — Lint guard misses retriever/minimal-path drift (Score 6)
- **Context:** Story requires validating references in `docs/architecture/overview.md` and `docs/architecture/source-tree.md` so operators follow the documented minimal-path workflow and native retriever usage.
- **Probability:** Medium — string/regex checks are easy to bypass as documentation evolves.
- **Impact:** High — missing drift negates the QA follow-up from Story 3.3 and reintroduces documentation misalignment during future retriever updates.
- **Mitigation:**
  - Implement structured parsing with required token lists and fallback heuristics.
  - Cover positive/negative paths in unit tests using representative doc fixtures.
  - Document remediation guidance so devs know what to update when the guard fails.
- **Testing Focus:** Unit tests for detector coverage, integration test that runs guard against mutated docs, regression test for retriever terminology.

## Risk Distribution

- Technical: 2 risks (1 high, 1 low)
- Operational: 2 risks (both medium)
- Security/Data/Performance/Business: 0 risks identified (scope limited to tooling automation).

## Detailed Risk Register

| Risk ID  | Detection Method | Mitigation Strategy | Residual Risk |
|----------|------------------|---------------------|---------------|
| TECH-001 | Static analysis of lint logic vs. documentation requirements | Preventive: define explicit required tokens, diff-based assertions, fixture-backed tests; Detective: run lint in CI + nightly docs smoke. | Low once tests cover additions/removals |
| OPS-001  | CI rehearsal run, dependency check via `scripts/bootstrap.sh` | Preventive: reuse existing virtualenv + `scripts/bootstrap.sh`; Document invocation command in architecture overview; add CI step with cached venv. | Low |
| OPS-002  | Monitoring merge failure rate, developer feedback | Preventive: Provide actionable failure messages; Corrective: allow targeted suppressions with justification; Document tuning knobs. | Medium (until lint proves stable) |
| TECH-002 | Review of documentation restructure proposals | Preventive: centralise required path list in config; Detective: add integration test covering shard rename; Corrective: update lint when docs reorganise. | Low |

## Risk-Based Testing Strategy

1. **Priority 1 – High Risk (TECH-001):**
   - Add unit tests covering required token presence/absence, including retriever rename scenarios.
   - Integration test that mutates sample docs (missing minimal-path steps) and asserts non-zero exit.
2. **Priority 2 – Medium Risks (OPS-001/OPS-002):**
   - Integration test executing lint via CLI within CI harness to confirm dependency availability.
   - Test failure messaging to ensure remediation guidance is precise.
3. **Priority 3 – Low Risk (TECH-002):**
   - Regression test verifying lint handles renamed architecture shard path list via config.

## Risk Acceptance & Monitoring

- **Must fix before merge:** TECH-001 mitigation and associated tests.
- **Monitor post-merge:** OPS-002 via CI telemetry (failure rate, duration) and maintainers' feedback.
- **Accepted risks:** None at this stage; reassess if lint proves overly noisy after rollout.

## Monitoring Requirements

- Track lint job duration and failure causes in CI to detect OPS-001/OPS-002 regressions.
- Schedule periodic review (per release) of required documentation tokens to keep TECH-002 residual risk low.

## Risk Review Triggers

- Architecture documentation restructure or new shards added.
- Change in minimal-path workflow or retriever configuration guidance.
- Sustained CI failures or complaints about lint noise.

---

**Risk profile: docs/qa/assessments/3.4-risk-20251002.md**
