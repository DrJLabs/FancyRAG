# Requirements Traceability Matrix

## Story: 1.1 - Workspace Bootstrap Script

Date: 2025-09-25
Reviewer: Quinn (Test Architect)

### Coverage Summary
- Total Requirements: 4
- Fully Covered: 4 (100%)
- Partially Covered: 0 (0%)
- Not Covered: 0 (0%)

### Requirement Mappings

#### AC1: Executing `scripts/bootstrap.sh` verifies Python 3.12 availability, creates `.venv`, and fails with guidance when incompatible.
**Coverage: FULL**
- **Integration Test**: `tests/integration/scripts/test_bootstrap.py::test_bootstrap_success_generates_lockfile`
  - Given the operator runs the script with Python 3.12 available
  - When the script provisions the environment in a clean directory
  - Then `.venv` exists and the run exits successfully with guidance
- **Integration Test**: `tests/integration/scripts/test_bootstrap.py::test_bootstrap_rejects_incompatible_python`
  - Given a Python 3.11 shim supplied via `BOOTSTRAP_PYTHON_BIN`
  - When interpreter detection executes
  - Then the script exits non-zero and emits actionable remediation
- **Integration Test**: `tests/integration/scripts/test_bootstrap.py::test_bootstrap_supports_custom_venv_path`
  - Given `--venv-path` overrides the default location
  - When the script runs
  - Then the custom path is created and highlighted in output
- **Integration Test**: `tests/integration/scripts/test_bootstrap.py::test_bootstrap_is_idempotent`
  - Given the script runs twice in the same directory
  - When the second invocation executes
  - Then it reuses `.venv` and leaves the lockfile unchanged

#### AC2: Script installs `neo4j-graphrag[openai,qdrant]` and companion packages with pins captured in `requirements.lock`.
**Coverage: FULL**
- **Integration Test**: `tests/integration/scripts/test_bootstrap.py::test_bootstrap_success_generates_lockfile`
  - Given test mode writes pinned versions
  - When the script completes
  - Then `requirements.lock` contains the expected packages and versions

#### AC3: Post-install validation `python -c "import neo4j_graphrag"` exits non-zero on failure with actionable messaging.
**Coverage: FULL**
- **Integration Test**: `tests/integration/scripts/test_bootstrap.py::test_bootstrap_import_validation_success`
  - Given `BOOTSTRAP_TEST_IMPORT=success`
  - When validation runs
  - Then the script logs the validation step and exits zero
- **Integration Test**: `tests/integration/scripts/test_bootstrap.py::test_bootstrap_import_validation_failure`
  - Given `BOOTSTRAP_TEST_IMPORT=fail`
  - When validation runs
  - Then the script logs the validation step, returns non-zero, and instructs rerun with `--force`

#### AC4: Script output documents follow-up steps and avoids exposing secrets or tokens.
**Coverage: FULL**
- **Integration Test**: `tests/integration/scripts/test_bootstrap.py::test_bootstrap_output_masks_secret`
  - Given `OPENAI_API_KEY` is set in the environment
  - When the script completes
  - Then stdout/stderr include follow-up guidance without leaking the token value

### Coverage Gaps
- None

### Test Design Recommendations
- Maintain overnight bootstrap smoke using real installs once CI cache is available.
- Extend secret redaction checks if additional guidance strings are introduced.

Traceability matrix generated from docs/qa/assessments/1.1-test-design-20250925.md.
