# Risk Assessment: Story 4.7 (Schema and Environment Utilities)

Date: 2025-10-05
Assessor: Quinn (Test Architect)

## Risk Summary

| ID        | Type        | Description                                                                                 | Likelihood | Impact | Score | Status      | Mitigation |
| --------- | ----------- | ------------------------------------------------------------------------------------------- | ---------- | ------ | ----- | ----------- | ---------- |
| TECH-076  | Technical   | Import-time schema load raises if packaged JSON missing/invalid, breaking CLI bootstrap     | Low (1)    | High (3) | 3   | Mitigated   | Default schema bundled under `scripts/config/`, unit tests cover missing/invalid paths |
| TECH-082  | Technical   | Placeholder `GraphSchema` when `neo4j_graphrag` absent lacks typed accessors during dev use | Low (1)    | High (3) | 3   | Mitigated   | Pipeline already raises earlier when GraphRAG deps are unavailable; documented in README |
| OPS-052   | Operational | `.env` discovery regression could block pipeline/CLI automation                            | Low (1)    | High (3) | 3   | Mitigated   | Unit suites exercise discovery overrides; integration smoke executed 2025-10-05 with `.env` |
| OPS-055   | Operational | Documentation drift between module layout and refactor epic                                | Low (1)    | Medium (2) | 2 | Cleared     | Architecture shard/source tree verified post-change; QA review today confirms alignment |

Overall residual score: 91 (Low Risk).

## Open Risks & Follow-ups

- Monitor schema override scenarios once Story 4.8 lands; add regression coverage for custom schema paths.
- Keep integration smoke (`LOCAL_STACK_SKIP_DOCKER_CHECK=1 pytest tests/integration/local_stack/test_minimal_path_smoke.py -rs`) in weekly rotation to catch env bootstrap drift.

## Mitigation Plan

1. Retain env/config unit suites in CI to catch JSON/credential regressions early.
2. When adding schema overrides, extend unit coverage to validate external path resolution.

## Residual Risk Evaluation

- No critical or high risks remain after mitigations.
- No waivers requested for this story.
