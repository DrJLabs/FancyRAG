# Risk Profile â€“ Story 3.1 (adaptive-chunking)

Date: 2025-10-01
Analyst: Quinn (QA)

## Summary
- Overall residual risk score: 75/100 (moderate).
- Critical risks: None.
- High risks: 2 (metadata drift, token cost overrun).
- Medium risks: 2 (binary ingestion edge cases, directory traversal ordering).
- Low risks: 1 (doc update complacency).

## Risk Matrix

| Risk ID | Category | Description | Probability | Impact | Score | Priority |
| --- | --- | --- | --- | --- | --- | --- |
| TECH-001 | Technical | Metadata propagation between scripts may drift, causing chunk hashes to misalign between Neo4j and Qdrant. | Medium (2) | High (3) | 6 | High |
| PERF-001 | Performance | Large codebases with deep directories could run chunking profiles for hours, exhausting OpenAI token budgets or rate limits. | Medium (2) | High (3) | 6 | High |
| OPS-001 | Operational | Binary or unsupported files might not be skipped correctly in unexpected encodings, leading to ingestion failures mid-run. | Low (1) | Medium (2) | 2 | Low |
| TECH-002 | Technical | Deterministic directory ordering assumptions could break on alternative filesystems, affecting checksum reproducibility. | Medium (2) | Medium (2) | 4 | Medium |
| BUS-001 | Business | Documentation updates for new profiles may lag, confusing operators and reducing adoption confidence. | Low (1) | Low (1) | 1 | Low |

## Mitigation Strategies
- TECH-001: Add shared metadata helper and unit tests validating Neo4j vs. Qdrant payload parity; integration smoke asserts matching checksums before export.
- PERF-001: Provide dry-run token estimation with configurable limits and stop conditions; document guidance on max directory size per profile.
- OPS-001: Enforce text/binary detection with fallback skip + warning; add regression test covering non-UTF8 file in fixture tree.
- TECH-002: Normalize paths via `Path.resolve().relative_to(root)` and add tests on POSIX vs. Windows path separators.
- BUS-001: Update README + architecture overview in same MR as code changes; include change log entry.

## Risk-Based Testing Focus
1. Parity tests verifying metadata hashes and payloads across ingest/export (covers TECH-001).
2. Load simulation on representative directory tree to validate runtime and rate-limit handling (PERF-001).
3. Fixture with binary/unsupported files to ensure pipeline skips gracefully (OPS-001).

## Monitoring Recommendations
- Log ingestion duration per directory profile; alert when exceeding documented thresholds.
- Capture token usage per run and compare against configured budgets.
- Track count of skipped files vs. processed files to spot unexpected binary ratios.

Risk profile: docs/qa/assessments/3.1-risk-20251001.md
