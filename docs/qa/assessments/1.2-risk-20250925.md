# Risk Profile: Story 1.2

Date: 2025-09-25
Reviewer: Quinn (Test Architect)

## Executive Summary
- Total Risks Identified: 4
- Critical Risks: 0
- High Risks: 1
- Risk Score: 88/100

Creating the environment template introduces configuration integrity and secret-handling risks. Automated checks and documentation must prevent template drift and accidental credential exposure. Sources: docs/stories/1.2.environment-configuration-template.md, docs/architecture/coding-standards.md, docs/prd.md, docs/architecture/tech-stack.md, docs/architecture/source-tree.md.

## Risk Distribution
### By Category
- Technical: 2 risks (High: 1)
- Security: 1 risk (High: 0)
- Operational: 1 risk (High: 0)

### By Component
- `.env.example`: 3 risks
- Documentation/automation: 1 risk

## Risk Matrix

| Risk ID  | Description                                                                 | Probability | Impact | Score | Priority |
|----------|------------------------------------------------------------------------------|-------------|--------|-------|----------|
| TECH-201 | Template missing keys causing runtime failures                               | Medium (2)  | High (3) | 6     | High |
| SEC-201  | Accidental check-in of secrets or overly specific examples                  | Low (1)     | High (3) | 3     | Low |
| OPS-201  | Documentation drift leading to incorrect operator steps                      | Medium (2)  | Medium (2) | 4   | Medium |
| TECH-202 | Automated check gaps allow regressions in required env keys                  | Low (1)     | Medium (2) | 2   | Low |

## Detailed Risk Register

| Risk ID  | Category   | Description | Probability | Impact | Score | Mitigation | Residual Risk |
|----------|------------|-------------|-------------|--------|-------|------------|----------------|
| TECH-201 | Technical  | Required env variables omitted or renamed, breaking CLI auth | Medium (2) | High (3) | 6 | Define authoritative key list in tests/CI; use parameterized test to assert template coverage; cross-reference docs. | Templates updated without test refresh. |
| SEC-201  | Security   | Example values inadvertently include real-looking secrets, encouraging unsafe copy | Low (1) | High (3) | 3 | Use obvious placeholders (e.g., `YOUR_OPENAI_API_KEY`); add warning banner and gitignored `.env`; run secret scanners. | Operators might still paste secrets into template before copying. |
| OPS-201  | Operational| Docs fall out of sync with template, confusing operators post-bootstrap | Medium (2) | Medium (2) | 4 | Link docs to template via include/snippet or update checklist; add doc unit test verifying references. | Manual doc updates without checklist. |
| TECH-202 | Technical  | Automated validation fails to detect new required keys introduced by PRD updates | Low (1) | Medium (2) | 2 | Centralize required key list, integrate with CI, review tests when PRD changes. | Emergent requirements not reflected promptly. |

## Risk-Based Testing Strategy
- **Priority 1:** Regression test ensuring `.env.example` enumerates {OPENAI_API_KEY, OPENAI_MODEL, OPENAI_EMBEDDING_MODEL, NEO4J_URI, NEO4J_USERNAME, NEO4J_PASSWORD, QDRANT_URL, QDRANT_API_KEY} with guardrail comments.
- **Priority 2:** Documentation test verifying instructions reference `bash scripts/bootstrap.sh` handoff and copying workflow.
- **Priority 3:** Secret-scanning workflow to confirm placeholder strings never match secret patterns.

## Risk Acceptance Criteria
- Must fix: TECH-201 before release; ensure tests fail on missing keys.
- Can deploy with mitigation: OPS-201 provided docs include update checklist.
- Accepted: None.

## Monitoring Requirements
- Add CI job to flag template/doc drift.
- Run secret scanner (e.g., `trufflehog` or `gitleaks`) on commits touching `.env.example`.

## Gate Snippet
```yaml
risk_summary:
  totals:
    critical: 0
    high: 1
    medium: 1
    low: 2
  highest: TECH-201
  recommendations:
    must_fix:
      - Enforce automated template key validation in CI.
    monitor:
      - Keep documentation sync checklist current.
```

## Hook Line
Risk profile: docs/qa/assessments/1.2-risk-20250925.md
