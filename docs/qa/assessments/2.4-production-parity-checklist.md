# Production Parity Checklist – Story 2.4

Date: 2025-09-29
Owner: Quinn

## Image & Version Alignment
- [x] Neo4j image pinned to `neo4j:5.26.0` to match managed cluster baseline.
- [x] Qdrant image pinned to `qdrant/qdrant:1.9.4` (bump alongside managed release).
- [ ] Document policy for digest pinning once managed registry publishes signed images.

## APOC Configuration
- [x] `NEO4JLABS_PLUGINS` enables APOC Core via compose environment.
- [x] `dbms.security.procedures.allowlist` and `unrestricted` set to `apoc.*` – mirrors production settings.
- [ ] Capture follow-up to mirror managed `apoc.conf` overrides (scheduled for Story 2.5).

## Credential & Secret Handling
- [x] Credentials sourced from `.env` (defaults `neo4j/neo4j`); no secrets in compose file.
- [x] Optional Qdrant API key remains blank locally; override when targeting managed service.
- [ ] Add guidance for Docker secrets / env files when running in CI (future enhancement).

## Data Persistence & Cleanup
- [x] Bind mounts under `./.data/neo4j` and `./.data/qdrant` ensure persistence across restarts.
- [x] `scripts/check_local_stack.sh --down --destroy-volumes` documents teardown for clean resets.
- [ ] Evaluate volume naming when running multiple stacks in parallel (tracked for QA review).

## Observability
- [x] Health checks defined for Neo4j (`cypher-shell RETURN 1`) and Qdrant (`/readyz`).
- [ ] Add log forwarding guidance if compose stack used in CI (optional).

## Risk Notes
- Smoke automation will flip from skip → execute once Story 2.5 delivers ingestion scripts.
- Revisit checklist after Story 2.5 to ensure parity for vector export + retrieval flows.
